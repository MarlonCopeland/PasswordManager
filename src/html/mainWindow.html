<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Swiss</title>
    <link rel="stylesheet" href="../css/app.css" />
    <link rel="stylesheet" href="../fonts/css/all.css" />
    <!--BLOG ABOUT HARD FUCKING HARD THIS WAS TO DO-->
    <script>var $ = jQuery = require("jquery");</script>
</head>
<style>

</style>

<body>
        <div class="menu">
                <ul class="menu-options">
                  <li class="menu-option">Back</li>
                  <li class="menu-option">Reload</li>
                  <li class="menu-option">Save</li>
                  <li class="menu-option">Save As</li>
                  <li class="menu-option">Inspect</li>
                </ul>
              </div>
    <div id="app-wrapper">
        <div id="side-nav"> <!--This section shows all the apps you have, TODO: Create a script that loads html li for each app you have loaded-->
            <ul style="list-style:none">
                <li><a href="#" id="pwdManager" class="nav" alt="Password Manager"><i class="fas fa-passport"></i></a></li>
                <li><a href="#" id="snippets" class="nav" alt="Snippets"><i class="fa fa-file-alt"></i></a></li>
                <li><a href="#" id="formatter" class="nav" alt="Formatter"><i class="fa fa-indent"></i></a></li>
                <li><a href="#" id="autoPost" class="nav" alt="Auto Poster"><i class="fa fa-file-import"></i></a></li>
                <li><a href="#" id="roledex" class="nav" alt="Roledex"><i class="fa fa-address-card"></i></a></li>
                <li><a href="#" id="extract" class="nav" alt="Exporter"><i class="fa fa-layer-group"></i></a></li>

                <li><a href="https://google.com/" id="getNewApp" class="link" alt="Add New App"><i class="fa fa-plus"></i></a></li>
            </ul>
        </div>
        <div id="top-bar"> <!--This section changed depending which app you have selected-->
                <ul style="list-style:none">
                    <li><a href="#" id="home" class="nav" alt="My Passwords"><i class="fas fa-passport"></i></a></li>
                    <li><a href="#" id="addPassword" class="nav" alt="Add A Password"><i class="fa fa-key"></i></a></li>
                    <li><a href="#" id="search" class="nav" alt="IDK Search?"><i class="fa fa-search"></i></a></li>
                    <li><a href="#" id="import" class="nav"><i class="fa fa-file-import"></i></a></li>
                    <li><a href="#" id="settings" class="nav"><i class="fa fa-cog"></i></a></li>
                </ul> 
        </div>
        <div id="main">

        </div>
    </div>
    <script>require('../scripts/renderer.js')</script>
</body>
<script>

/*Context Menu Code*/
const menu = document.querySelector(".menu");
let menuVisible = false;

const toggleMenu = command => {
  menu.style.display = command === "show" ? "block" : "none";
  menuVisible = !menuVisible;
};

const setPosition = ({ top, left }) => {
  menu.style.left = `${left}px`;
  menu.style.top = `${top}px`;
  toggleMenu("show");
};

window.addEventListener("click", e => {
  if(menuVisible)toggleMenu("hide");
});

window.addEventListener("contextmenu", e => {
  e.preventDefault();
  const origin = {
    left: e.pageX,
    top: e.pageY
  };
  setPosition(origin);
  return false;
});

/*End Context Menu Code*/

    var app = require("../scripts/app");

    app.on("rendered", function (rendered) {
        $("#main").html(rendered);
    });

    var showContent = function (view, appFolder) {
        app.emit("view-selected", view, appFolder);
    };

    var loadSwissApps = function(){
        array.forEach(element => {
            //TODO: Use this to take in an array of all the apps you have then output li tag inside of nav ul
        });
    }

    $(function () {
        showContent("home", "PasswordsTool");
        // $("#home").on("click", function(){
        //     app.emit("view-selected", "home");
        // });

        // $("#search").on("click", function(){
        //     app.emit("view-selected", "search");
        // });
        $(".nav").on("click", function (ev) {
            ev.preventDefault();
            showContent(this.id, "PasswordsTool");
        });
        //alternate implementation that passess in the id...

    });
</script>

</html>